<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="icon" href="images/docs.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Mulish:ital,wght@0,200..1000;1,200..1000&family=Raleway:ital,wght@0,100..900;1,100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">

      <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Dosis:wght@200..800&family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Mulish:ital,wght@0,200..1000;1,200..1000&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Sora:wght@100..800&display=swap" rel="stylesheet">

    

  <link rel="icon" href="icon.png">
  <title>Docs</title>
  <style>

      
       @import url('https://fonts.googleapis.com/css2?family=Abel&family=Fascinate+Inline&family=Ga+Maamli&family=Happy+Monkey&family=Jaro:opsz@6..72&family=Kumbh+Sans:wght@100..900&family=Lilita+One&family=Lobster&family=Pacifico&family=Permanent+Marker&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Protest+Guerrilla&family=Quantico:ital,wght@0,400;0,700;1,400;1,700&family=Silkscreen:wght@400;700&family=Tiny5&family=VT323&display=swap');



      
    * { margin: 0; padding: 0; box-sizing: border-box; font-family:"Lato";}
    body {  background: white; color: black; height: 100vh; display: flex; flex-direction: column; }
    .menu-bar {
        background: white; padding: 0px; display: flex; gap: 12px; border-bottom:whitesmoke 1px solid; 
    }
      
    .menu-bar button {
        display:inline-block;
        background: none; border: none; color: black; cursor: pointer; padding: 12px 16px; font-size: 14px;
        height:100%;
        
    }

    #editorToolbar {
  position: fixed; 
  bottom: 35px;        
  left: 10px;
  right: 10px;
  width: auto;       
  height: 60px;
  background: white;
  border: solid whitesmoke 1px;
  border-radius: 6px;
  overflow-x: scroll;
  padding: 0 10px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 10000;    
}

      

      #editorToolbar button {
          
          background:transparent;
          border:none;
          padding:15px;
          padding-left:20px;
          padding-right:20px;
          cursor:pointer;
          
          }

      #editorToolbar button:hover {

          background:whitesmoke;

          }
      
      .menu-bar button:hover {
        /* color:dodgerblue; */
          background:whitesmoke;
        
          }

      .overview_title {
            font-size:34px;
          font-family:"Lato";
          display:block;
          margin-bottom:15px;
          margin-top:16px;
          
          }

      #overviewList {
         list-style-type:none;
     
          }

      #overviewList li {
         display:block;
          width:99%;
      
          
          }

      #overviewList li a {

          display:block;
          width:99%;
          margin:5px;
          background:whitesmoke;
          padding:10px;
          

           color:black;
          text-decoration:none;
}

      #overviewList li a:hover {
             background:#dbeffa !important;
          }

      
    .sidebar {
        width: 225px; background: white; overflow-y: auto; border-right: 1px solid whitesmoke;
        display:block;
    }
      
    .sidebar h3 {
        padding: 10px; font-size: 14px; color: black; 
    }
      
    .sidebar ul {
        list-style: none; padding: 0 10px;
    }
      
    .sidebar li {
        margin-bottom: 4px; 
    }
    
      .sidebar a {
          display: block; padding: 6px; color: black; text-decoration: none; border-radius: 4px;
      }
      
   .sidebar a.active {
  background: #dbeffa !important; 
  color: dodgerblue !important; 
  font-weight: bold !important; 
}

.sidebar a:not(.active):hover {
  background: whitesmoke;
  color: black;
  font-weight: normal;
}

    .content-area { flex: 1; position: relative; padding: 10px; overflow: auto; }
    #editor { width: 100%; height: 90vh; overflow-y:scroll; overflow-x:hidden; background: white; color: black; caret-color: black; padding: 10px; outline: none; overflow: auto; white-space: pre-wrap; word-break: break-word; }
  
    .status-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 28px;
  background: whitesmoke;
  color:black;
  padding: 4px 10px;
  font-size: 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 1000;
}

.chrome-alert-box {
  position: fixed;
  top: 40px;
  left: 50%;
  transform: translateX(-50%);
  background: #fff;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  padding: 20px 24px;
  width: 360px;
  z-index: 9999;
  display: none;
  font-family: "Mulish", sans-serif;
  animation: fadeIn 0.15s ease;
  color: black;
}

.chrome-header {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 15px;
  color: black;
}

.chrome-options {
  list-style-type: none;
  padding-left: 20px;
  margin: 0 0 20px 0;
}

.chrome-options li {
  cursor: pointer;
  padding: 6px 8px;
  border-radius: 6px;
  transition: background-color 0.15s ease;
  user-select: none;
  font-size: 14px;
    text-style-type:none;
  color: black;
}

.chrome-options li.selected {
  background-color: #834424;
    text-style-type:none;
  color: white;
  font-weight: 600;
}


@keyframes fadeIn {
  from { opacity: 0; transform: translateX(-50%) translateY(-10px); }
  to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

      

      .confirm {
          padding:5px; 
          width:90px;
          margin:3px;
         float:right;
    }

      @media (max-width:800px) {
       .sidebar { display:none; }
          #menuBtn { 
       display:block;
              }
          }

      @media (min-width:800px) {
    .sidebar { display:block !important; }

          #menuBtn { 
       display:none;
              }
          
          }

           .link {
        color:teal;
            text-decoration:underline;
            cursor:pointer;
            
            }

        .link:hover {
       color:blue;
            }

      

      #fontSelector, #sizeSelector {
  padding: 4px 6px;
  border: 1px solid whitesmoke;
  border-radius: 0px;
  font-size: 14px;
          border-top:none;
          border-bottom:none;
  background: white;
  cursor: pointer;
          outline:none;
}

.bottom_message {
  display:inline-block;
  margin-top:10px;
  margin-left:10px;
}

      
  </style>
</head>
<body>
  <div class="menu-bar">
       <button onclick="toggleMenu()" id="menuBtn">&#9776;</button>
    <button onclick="newDoc()">New</button>
    <button onclick="showOptions()" id="exportBtn">Save/Export</button>
    
      <button onclick="loadContent()" id="openBtn">Open</button>
    <button onclick="closeDoc()" id="closeBtn">Close</button>
    <button onclick="deleteDoc()" id="deleteBtn">Delete</button>
  </div>
  <div style="display: flex; flex: 1;">
    <div class="sidebar" id="sidebar">
      <h3>Docs</h3>
      <ul id="docList"></ul>
    </div>
    <div class="content-area" id="contentArea"><div id="editor" contenteditable="true"></div>
</div>
  </div>
  <div class="status-bar">
    <span id="statusName">Home</span>
    <span id="statusMsg"></span>
  
  </div>

    <input type="file" id="fileInput" style="display: none;">



<div id="chromePrompt" class="chrome-alert-box" style="display:none;">
  <div class="chrome-header">Choose how to save the document:</div>
  <ul class="chrome-options">
    <li>Save to Jamesy Creator</li>
    <li>Download as a .jcdoc</li>
       <li>Save as a .pdf</li>
      <li>Print</li>

  </ul>

  <button class="confirm" onclick="confirmChoice()">OK</button>
<button class="confirm" onclick="hideOptions()">Cancel</button>
    
</div>


<div id="addElements" class="chrome-alert-box" style="display:none;">
  <div class="chrome-header">Elements</div>
  <ul class="chrome-options">
    <li>Table</li>
    <li>Link</li>
       <li>Checkbox</li>
      <li>List item</li>
       <li>Image</li>

  </ul>

   <button class="confirm" onclick="addElement()">Add</button>
<button class="confirm" onclick="closeAddElements()">Cancel</button>
   
</div>



    
    
  <script>



function insertAtCaret(html, element = document.getElementById("editor")) {
    element.focus();
    if (typeof window.getSelection != "undefined" && typeof document.createRange != "undefined") {
        const range = window.getSelection().getRangeAt(0);
        const fragment = document.createRange().createContextualFragment(html);
        range.deleteContents(); 
        range.insertNode(fragment); 
    }
}




 function insertImage() {
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'image/*';

    fileInput.addEventListener('change', function() {
        const file = this.files[0];

        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();

            reader.onload = function(event) {
                const imageUrl = event.target.result;

                const widthInput = prompt("Image size | Type 'fill' for 100% width");
                if (widthInput !== null) {
                    const editableDiv = document.getElementById('editor');
                    const img = document.createElement('img');
                    img.src = imageUrl;

                    const trimmedWidth = widthInput.trim();
                    const lowerCaseWidth = trimmedWidth.toLowerCase();

                    if (lowerCaseWidth === "fill") {
                        img.style.width = "100%";
                    } else if (lowerCaseWidth.endsWith("px") || lowerCaseWidth.endsWith("%")) {
                        img.style.width = lowerCaseWidth;
                    } else {
                        const parsedWidth = parseInt(trimmedWidth);
                        if (!isNaN(parsedWidth) && parsedWidth >= 1) {
                            img.style.width = parsedWidth + "px";
                        } else {
                            alert("Invalid width");
                            return;
                        }
                    }

                    editableDiv.appendChild(img);
                }
            };
            reader.readAsDataURL(file);
        } else if (file) {
            alert("Invalid file type. Please select an image file.");
        }
    });
    fileInput.click();
}

function insertLink() {
      // Ask for the link text and URL
      let linkText = prompt("Enter the text for the link:");
      let linkURL = prompt("Enter the URL for the link:", "https://");

      if (linkText && linkURL) {
        // Insert the link into the contenteditable div
        let editor = document.getElementById("editor");
        editor.focus();

        // Create the link HTML
        let link = `&nbsp;<span class="link" contenteditable="true" onclick="openTab('${linkURL}');" target="_blank" contenteditable="false">${linkText}</span> &nbsp;`;

        // Insert the link at the current cursor position
        document.execCommand("insertHTML", false, link);
      }
    }
    
       function insertCheckbox() {
           // document.getElementById("mySelect").value = "option0";
            const checkboxHTML = '<span class="checkbox"><input type="checkbox" value=""></span>';
            const div = document.getElementById("editor");
            insertAtCaret(checkboxHTML, div);
           
        }

  function insertTable() {
  const size = prompt("What size do you want your table to be? (e.g 4 x 3, 6 x 9)", "4 x 3");
  if (!size) return;

  const [rows, cols] = size.toLowerCase().split("x").map(x => parseInt(x.trim()));
  if (isNaN(rows) || isNaN(cols)) {
    alert("Invalid format. Use 'rows x columns' (e.g., 3 x 4)");
    return;
  }

  let tableHTML = '<table border="1" style="border-collapse: collapse; width: 100%;">';
  for (let i = 0; i < rows; i++) {
    tableHTML += "<tr>";
    for (let j = 0; j < cols; j++) {
      tableHTML += `<td contenteditable="true" style="border: solid black 1px; background: transparent; padding: 20px;">Cell ${i * cols + j + 1}</td>`;
    }
    tableHTML += "</tr>";
  }
  tableHTML += "</table>";

  insertAtCaret(tableHTML);
}





function closeAddElements() {
   document.getElementById("addElements").style.display = "none";
}


      function toggleMenu() {
  const sidebar = document.querySelector(".sidebar");
  if (sidebar) {
    if (sidebar.style.display === "block") {
      sidebar.style.display = "none";
    } else {
      sidebar.style.display = "block";
    }
  } else {
    console.warn("Sidebar element not found");
  }
}



     function confirmChoice() {
  const selected = document.querySelector('.chrome-options li.selected');
  if (!selected) {
    alert('Please select an option first.');
    return;
  }

  const option = selected.textContent.trim();

    if (option === 'Save to Jamesy Creator') {
      hideOptions();
    saveDoc();
  } else if (option === 'Download as a .jcdoc' || option === 'Downloads') {
      hideOptions();
    saveToComputer();
  } else if (option === 'Save as a .pdf') {
      hideOptions();
    printContent(true); 
  } else if (option === 'Print') {
         printContent(true);
        } else {
    alert('Unknown option selected: ' + option);
  }

  hideOptions();
}



function addElement() {
  const selected = document.querySelector('#addElements .chrome-options li.selected');
  if (!selected) {
    alert('Please select an option first.');
    return;
  }

  const option = selected.textContent.trim();

  if (option === 'Table') {
    insertTable();
    closeAddElements(); 
  } else if (option === 'Link') {
    insertLink();
    closeAddElements();
  } else if (option === 'Checkbox') {
insertCheckbox();
closeAddElements();

  } else if (option === 'Image') { 
    insertImage();
    closeAddElements();
  } else {
    alert('Unknown option selected: ' + option);
  }
}




 

 
function changeFont(fontName) {
  const editor = document.getElementById('editor');
  const selection = window.getSelection();

  if (!selection.rangeCount) return;

  const range = selection.getRangeAt(0);
  if (range.collapsed) {

    const span = document.createElement('span');
    span.style.fontFamily = fontName;
    span.appendChild(document.createTextNode('\u200B')); 
    range.insertNode(span);
    
    
    range.setStartAfter(span);
    range.setEndAfter(span);
    selection.removeAllRanges();
    selection.addRange(range);
  } else {
  
    const span = document.createElement('span');
    span.style.fontFamily = fontName;
    span.appendChild(range.extractContents());
    range.insertNode(span);


    selection.removeAllRanges();
    const newRange = document.createRange();
    newRange.selectNodeContents(span);
    selection.addRange(newRange);
  }

  
  document.getElementById('fontChanger').value = '';
}


      

function showOptions() {
  document.getElementById("chromePrompt").style.display = "block";
}

function hideOptions() {
  document.getElementById("chromePrompt").style.display = "none";
}

function saveToCreator() {
  console.log("Saved to Jamesy Creator");
  hideOptions();
}

function saveToComputer() {
  console.log("Saved to Computer");
  hideOptions();
}

function addElements() {
   document.getElementById("addElements").style.display = "block";
}
    

    


      document.querySelectorAll('.chrome-options li').forEach(li => {
  li.addEventListener('click', () => {
    // Remove 'selected' from all
    document.querySelectorAll('.chrome-options li').forEach(el => el.classList.remove('selected'));
    // Add 'selected' to clicked
    li.classList.add('selected');
    
    // Perform your save action depending on selected option text
    console.log("Selected save location:", li.textContent);
    // Example: call saveToLocation(li.textContent);
  });
});


      
      
    const storageKey = 'jcdocs';
    const openKey = 'jcdocsOpen';
    let docs = {};
    let openDocs = [];
    let current = null;

    function loadDocs() {
      try { return JSON.parse(localStorage.getItem(storageKey)) || {}; } catch(e) { return {}; }
    }
    function saveDocs() { localStorage.setItem(storageKey, JSON.stringify(docs)); }

    function loadOpen() {
      try { return JSON.parse(sessionStorage.getItem(openKey)) || []; } catch(e) { return []; }
    }
    function saveOpen() { sessionStorage.setItem(openKey, JSON.stringify(openDocs)); }

    function buildSidebar() {
      const list = document.getElementById('docList');
      list.innerHTML = '';
      // Overview link
      const liOv = document.createElement('li');
      const aOv = document.createElement('a');
      aOv.textContent = 'Home';
      aOv.href = window.location.pathname;
      if (!current) aOv.classList.add('active');
      liOv.appendChild(aOv);
      list.appendChild(liOv);

      openDocs.forEach(name => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.textContent = name;
        a.href = `?doc=${encodeURIComponent(name)}`;
        if (current === name) a.classList.add('active');
        li.appendChild(a);
        list.appendChild(li);
      });
    }

    function openDoc(name) {
      if (!openDocs.includes(name)) {
        openDocs.push(name);
        saveOpen();
      }
      window.location.search = `?doc=${encodeURIComponent(name)}`;
    }


      function changeFontSizeBy(delta) {
  const sel = window.getSelection();
  if (!sel.rangeCount) return;
  const range = sel.getRangeAt(0);

  function getCurrentFontSize(el) {
    const size = window.getComputedStyle(el).fontSize;
    return parseInt(size) || 16;
  }

  function applyFontSize(span, size) {
    span.style.fontSize = `${size}px`;
    span.style.display = "inline";
  }

  if (!range.collapsed) {
    // Change size of selected text
    const selectedText = range.extractContents();
    const span = document.createElement("span");
    span.appendChild(selectedText);

    const currentSize = getCurrentFontSize(span);
    applyFontSize(span, currentSize + delta);
    range.insertNode(span);
  } else {
    // No selection — insert a span to type into
    const span = document.createElement("span");
    const dummy = document.createTextNode("\u200B");
    span.appendChild(dummy);

    // Get current node's font size
    const node = sel.focusNode?.parentElement;
    const currentSize = getCurrentFontSize(node || document.body);
    applyFontSize(span, currentSize + delta);

    range.insertNode(span);

    // Move caret inside the new span
    const newRange = document.createRange();
    newRange.setStart(span.firstChild, 1);
    newRange.collapse(true);
    sel.removeAllRanges();
    sel.addRange(newRange);
  }
}



       function setFontSize(size) {
    const selection = window.getSelection();
    if (!selection.rangeCount) return;

    let fontSize;
    switch(size) {
      case 'small': fontSize = '12px'; break;
      case 'default': fontSize = '16px'; break;
             case 'medium': fontSize = '24px'; break;
             case 'large': fontSize = '42px'; break;
             case 'huge': fontSize = '72px'; break;
            
      default: fontSize = '16px';
    }

    const range = selection.getRangeAt(0);

    if (range.collapsed) {
      // Insert a span with font size for future typing
      const span = document.createElement('span');
      span.style.fontSize = fontSize;
      span.appendChild(document.createTextNode('\u200B')); // zero-width space
      range.insertNode(span);

      // Move caret inside the span
      const newRange = document.createRange();
      newRange.setStart(span.firstChild, 1);
      newRange.collapse(true);
      selection.removeAllRanges();
      selection.addRange(newRange);
    } else {
      // Wrap selected text in a span with font size
      const selectedText = range.extractContents();
      const span = document.createElement('span');
      span.style.fontSize = fontSize;
      span.appendChild(selectedText);
      range.insertNode(span);

      // Re-select the new span content
      selection.removeAllRanges();
      const newRange = document.createRange();
      newRange.selectNodeContents(span);
      selection.addRange(newRange);
    }
  }
      
      
      

      
    function renderOverview() {
      current = null;
      docs = loadDocs();
      openDocs = loadOpen();
      buildSidebar();
      document.getElementById('statusName').textContent = 'My creations';
      document.getElementById('exportBtn').style.display = 'none';
      document.getElementById('closeBtn').style.display = 'none';
         document.getElementById('openBtn').style.display = 'none';
         

      document.getElementById('deleteBtn').style.display = 'none';
      document.getElementById('contentArea').innerHTML = `
        <span class="overview_title">&#x2728; My creations</span>
        <ul id="overviewList"></ul>
       <span class="bottom_message">Create a new document by clicking the 'New' button at the top left of the page.</span>
      `;
      const ul = document.getElementById('overviewList');
      Object.keys(docs).forEach(name => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.textContent = name;
        a.href = '#';
        a.onclick = () => openDoc(name);
        li.appendChild(a);
        ul.appendChild(li);
      });
    }


   
    function renderEditor(name) {
      current = name;
      docs = loadDocs();
      openDocs = loadOpen();
      buildSidebar();
      document.getElementById('statusName').textContent = name;
      document.getElementById('closeBtn').style.display = '';
         document.getElementById('openBtn').style.display = '';
         
         document.getElementById('exportBtn').style.display = '';
      document.getElementById('deleteBtn').style.display = '';
     document.getElementById('contentArea').innerHTML = `

  

  <div id="editor" contenteditable="true" style="height: calc(100% - 40px); overflow-y: auto; padding-bottom: 50px;"></div>
  <div id="editorToolbar">

    <button onclick="addElements()">Elements</button>

    <button onclick="document.execCommand('bold')" style="font-weight:bold;">B</button>
    <button onclick="document.execCommand('italic')" style="font-style:italic;font-family:'Roboto Mono';">I</button>
    <button onclick="document.execCommand('underline')" style="text-decoration:underline;">U</button>

<select id="fontSelector" onchange="changeFont(this.value)">
  <option value="Lato">Lato</option>
  <option value="Roboto Mono">Roboto Mono</option>
  <option value="Raleway">Raleway</option>
  <option value="Mulish">Mulish</option>
  <option value="Fira Sans">Fira Sans</option>
  <option value="IBM Plex Sans">IBM Plex Sans</option>
  <option value="Montserrat">Montserrat</option>
  <option value="Open Sans">Open Sans</option>
  <option value="Sora">Sora</option>
  <option value="Poppins">Poppins</option>
  <option value="Lilita One">Lilita One</option>
  <option value="Pacifico">Pacifico</option>
</select>
&nbsp;

<span style="font-size:14px;">Font size:</span>

<button onclick="setFontSize('small')">Small</button>
  <button onclick="setFontSize('default')">Default</button>
  <button onclick="setFontSize('medium')">Medium</button>
    <button onclick="setFontSize('large')">Large</button>
 <button onclick="setFontSize('huge')">Huge</button>



  

   
  </div>
`;

      const editor = document.getElementById('editor');
      editor.innerHTML = docs[name] || '';
      editor.focus();
    }

    function newDoc() {
      const name = prompt('New document name', `doc${Date.now()}`);
      if (!name) return;
      docs[name] = '';
      saveDocs();
      openDocs = loadOpen();
      openDocs.push(name);
      saveOpen();
      openDoc(name);
    }

    function saveDoc() {
    
      if (!current) return;
      const content = document.getElementById('editor').innerHTML;
      docs[current] = content;
      saveDocs();
      const msg = document.getElementById('statusMsg');
      msg.textContent = 'Saved ✓';
      setTimeout(() => { msg.textContent = ''; }, 1500);

        console.log("Document saved");
        alert("Your document has been saved.");
        
    }

    function closeDoc() {
      openDocs = loadOpen();
      openDocs = openDocs.filter(n => n !== current);
      saveOpen();
      window.location.href = window.location.pathname;
    }

    function deleteDoc() {
      if (!current || !confirm(`Delete "${current}"? This cannot be undone.`)) return;
      delete docs[current];
      saveDocs();
      openDocs = loadOpen().filter(n => n !== current);
      saveOpen();
      window.location.href = window.location.pathname;
    }

    // Initialize
    docs = loadDocs();
    openDocs = loadOpen();
    const params = new URLSearchParams(window.location.search);
    const docName = params.get('doc');
    if (docName && docs.hasOwnProperty(docName)) {
      renderEditor(docName);
    } else {
      renderOverview();
    }

function loadContent() {
  const fileInput = document.getElementById('fileInput');
  if (!fileInput) return;

  fileInput.click();
  fileInput.onchange = function(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    const reader = new FileReader();
    reader.onload = function(e) {
      const content = e.target.result;
      const name = prompt('Name for imported document', file.name);
      if (!name) return;

      docs = loadDocs();
      docs[name] = content;
      saveDocs();

      openDocs = loadOpen();
      if (!openDocs.includes(name)) openDocs.push(name);
      saveOpen();

      openDoc(name);
    };
    reader.readAsText(file);
  };
}


  function saveToComputer() {
  if (!current) return;

  const content = docs[current] || '';
  const blob = new Blob([content], { type: 'text/html' });
  const url = URL.createObjectURL(blob);

  // Ensure no duplicate .jcdoc extension
  let filename = current;
  if (filename.toLowerCase().endsWith('.jcdoc')) {
    filename = filename.slice(0, -6);
  }
  filename += '.jcdoc';

  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);

  URL.revokeObjectURL(url);

  const msg = document.getElementById('statusMsg');
  msg.textContent = 'Saved to computer';
  setTimeout(() => { msg.textContent = ''; }, 1500);
}




      function printContent(print) {
    
    var content = document.getElementById('contentArea').innerHTML;

    var contentDiv = document.getElementById('contentArea');
    var computedStyle = window.getComputedStyle(contentDiv);
    
    var css = `
    
     @import url('https://fonts.googleapis.com/css2?family=Abel&family=Fascinate+Inline&family=Ga+Maamli&family=Happy+Monkey&family=Jaro:opsz@6..72&family=Kumbh+Sans:wght@100..900&family=Lilita+One&family=Lobster&family=Pacifico&family=Permanent+Marker&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Protest+Guerrilla&family=Quantico:ital,wght@0,400;0,700;1,400;1,700&family=Silkscreen:wght@400;700&family=Tiny5&family=VT323&display=swap');


            .add-button2 {
                 background:white;
                 border:solid whitesmoke 2px;
                 transition:0.3s;
                 margin-top:5px;
                 text-align:center;
                 cursor:pointer;
                 padding:5px;
                 font-family:verdana;
                 font-size:18px;
                 border-radius:10px;
                 outline:none;
             }

                 .add-button2:hover {
       background:whitesmoke;
                 }
                 
         
        body {
            background-color: ${computedStyle.backgroundColor};
            color: ${computedStyle.color};
            padding-bottom:0px;
            margin-bottom:0px;
            font-family: ${computedStyle.fontFamily};
            font-size: ${computedStyle.fontSize};
        }
        #contentDiv {
            padding: ${computedStyle.padding};
            margin: ${computedStyle.margin};
            border: ${computedStyle.border};
        }
    `;

   
    var printWin = window.open('', 'PrintWindow');
    

    printWin.document.write(`
        <html>
        <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Dosis:wght@200..800&family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Mulish:ital,wght@0,200..1000;1,200..1000&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Sora:wght@100..800&display=swap" rel="stylesheet">

            <title>Export</title>
            <style>${css}</style>
        </head>
        <body>
            ${content}
        </body>
        </html>
    `);

   
    printWin.document.close();

setTimeout(() => {
    
    if (print === true) {
         printWin.print();
    }

    }, 100);

    
}



      
  </script>
</body>
</html>
