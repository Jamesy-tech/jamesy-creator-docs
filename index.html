<!DOCTYPE html>
<html>
<head>
    <link rel="icon" href="docs.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cal+Sans&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900&family=Mulish:ital,wght@0,200..1000;1,200..1000&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
  <title>Docs</title>
  <style>
    * {
      font-family: "Mulish";
      box-sizing: border-box;
    }
    body {
      padding:0px;
      margin: 0;
    }

    .body {
        padding:20px;
        padding-top:6px;
    }

    .toolbar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-left:20px;
      margin-bottom: 20px;
    }

    @media(max-width:700px) {
      .toolbar {
        margin-left:0px;
      }
    }

    @media(max-width:500px) {
      #docSelect {
        max-width:35% !important;
      }
    }

    button:not(.button_jamesy-creator) {
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      background: white;
      cursor: pointer;
    }
    #docSelect {
      padding: 8px 12px;
      outline: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      max-width:50%;
      border: none;
      border-right: solid transparent 10px;
      background: white;
      cursor: pointer;
    }
    .material-icons-outlined {
      vertical-align: middle;
    }
    .document-container {
      display: none;
      flex-direction: column;
      gap: 10px;
    }
    .banner {
      margin: 10px;
      margin-left:5px;
      margin-right:5px;
      min-height: 180px;
      max-height: 260px;
      border-radius: 15px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transform: scaleX(-1);
      position: relative;
      width: 100%;
      overflow: hidden;
    }
    .banner img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 15px;
      margin: 10px;
      max-height: 300px;
      object-fit: cover;
      background-position: center;
      background-repeat: no-repeat;
      transform: none !important;
    }
    .title, .details, .text_content {
      border: none;
      outline: none;
      width: 100%;
      scrollbar-width: none;
      -ms-overflow-style: none;
      overflow: -moz-scrollbars-none;
    }
    .title::-webkit-scrollbar, 
    .details::-webkit-scrollbar, 
    .text_content::-webkit-scrollbar {
      display: none;
    }
    .title {
      font-size: 30px;
      height: 38px;
      margin-top:10px;
      margin-left:6px;
      resize: none;
    }
    .details {
      font-size: 16px;
      margin-left:6px;
      resize: none;
      color: gray;
      height: 25px;
    }
    .text_content {
      font-size: 18px;
      flex: 1;
      margin-left:6px;
      min-height: 60vh;
      margin-left: 6px;
      margin-right: 15px;
      margin-top:0px;
      padding-top:0px;
    }
    textarea {
      margin-left: 15px;
    }
    @media print {
      body * {
        visibility: hidden !important;
      }
      .document-container, .document-container * {
        visibility: visible !important;
      }
      .document-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        padding: 10px;
        margin: 0;
        background: white;
        box-sizing: border-box;
        overflow: visible !important;
      }
      .toolbar {
        display: none !important;
      }
      body {
        padding: 0;
        margin: 0;
      }
      .banner {
        margin: 0;
        border-radius: 15px;
        overflow: hidden;
        background: none !important;
        transform: none !important;
        min-height:0px;
        max-height:240px;
        margin-bottom: 5px;
        position: relative;
        width: 100%;
      }
      .banner img {
        display: block !important;
        width: 100%;
        height: auto;
        border-radius: 15px;
        margin: 0;
        max-height: 240px;
        object-fit: cover;
      }
        
      textarea {
        border: none !important;
        box-shadow: none !important;
        resize: none !important;
        margin-left: 0;
        margin-right: 0 !important;
        scrollbar-width: none !important;
        -ms-overflow-style: none !important;
        overflow: -moz-scrollbars-none !important;
      }
        
      textarea::-webkit-scrollbar {
        display: none !important;
      }
      .text_content {
        page-break-inside: avoid;
        min-height: auto !important;
        flex: none !important;
      }
    }
  </style>
</head>
<body>

   <div class="jamesy-creator">
  <style>
    .jamesy-creator {
      height: 40px;
      position: sticky;
      margin-bottom:20px;
      padding:5px;
      display:flex;
      padding-top:7px;
      padding-left:12px;
      background: rgba(0, 0, 0, 0.8);
    }
    .icon_jamesy-creator {
      height: 90%;
      cursor:default;
    }

    .title_jamesy-creator {
       color:white;
       cursor:default;
       margin-left:7px;
       margin-right:25px;
       margin-top:2px;
    }

    .button_jamesy-creator {
     background:transparent;
     border:none;
     outline: none;
     color:white;
     padding:0px;
     margin-left:20px;
     cursor:pointer;
     text-decoration: none;
     margin-top:2px;
     transition: 0.2s;
    }
    
    .button_jamesy-creator:hover {
        transform: scale(1.06);
    }

  </style>
  <img src="shapes.png" class="icon_jamesy-creator">
  <span class="title_jamesy-creator" id="title_jamesy-creator">Jamesy Creator</span>

  <a class="button_jamesy-creator" href="https://jamesy-tech.github.io/jamesy-creator/">Home</a>
    <a class="button_jamesy-creator" href="https://jamesy-tech.github.io/jamesy-creator/Jamesy%20Creator/index.html?page=apps">Apps</a>
      <a class="button_jamesy-creator" href="https://jamesy-tech.github.io/jamesy-creator/Jamesy%20Creator/index.html?page=profile">Profile</a>
        <a class="button_jamesy-creator" href="https://jamesy-tech.github.io/jamesy-creator/Jamesy%20Creator/index.html?page=account">Account</a>

        <script>

            const title = document.title

            document.getElementById("title_jamesy-creator").textContent = title

        </script>

</div>


<div class="body">

  <div class="toolbar">
    <select id="docSelect">
      <option value="-">No document selected</option>
    </select>
    <button onclick="addDocument()">
      <span class="material-icons-outlined">add</span>
    </button>
    <button onclick="deleteDocument()">
      <span class="material-icons-outlined">delete</span>
    </button>
    <button onclick="printDocument()">
      <span class="material-icons-outlined">print</span>
    </button>
    <input type="file" id="bannerInput" accept="image/*" style="display: none;">
    <button onclick="document.getElementById('bannerInput').click()">
      <span class="material-icons-outlined">image</span>
    </button>
  </div>

  <div class="document-container" id="document">
    <div class="banner">
      <img alt="Banner Image">
    </div>
    <textarea class="title" placeholder="Untitled Document"></textarea>
    <textarea class="details" placeholder="By Your Name"></textarea>
    <textarea class="text_content">Paragraph text...</textarea>
  </div>


  </div>

  <script>
      
      
    const select = document.getElementById('docSelect');
    const doc = document.getElementById('document');
    const titleField = doc.querySelector('.title');
    const detailsField = doc.querySelector('.details');
    const contentField = doc.querySelector('.text_content');
    const banner = doc.querySelector('.banner');
    const bannerImg = banner.querySelector('img');
    const bannerInput = document.getElementById('bannerInput');
    const STORAGE_KEY = 'jamesy_documents_v2';
    const username = localStorage.getItem("username") || "Guest"
    let documents = {};

    function saveToLocalStorage() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(documents));
    }

    function loadFromLocalStorage() {
      const data = localStorage.getItem(STORAGE_KEY);
      if (data) {
        documents = JSON.parse(data);
      } else {
        const id = Date.now().toString();
        documents[id] = {
          title: 'Untitled Document',
          details: `By ${username}`,
          content: 'Paragraph text...',
          banner: ''
        };
        saveToLocalStorage();
      }
      updateDropdown();
    }

    function updateDropdown() {
      const current = select.value;
      select.innerHTML = '<option value="-">No document selected</option>';
      for (const [id, docItem] of Object.entries(documents)) {
        const option = document.createElement('option');
        option.value = id;
        option.textContent = docItem.title || 'Untitled Document';
        select.appendChild(option);
      }
      if (documents[current]) {
        select.value = current;
        loadDocument(current);
      } else {
        select.value = '-';
        doc.style.display = 'none';
      }
    }

    function addDocument() {
      const id = Date.now().toString();
      documents[id] = {
        title: 'Untitled Document',
        details: `By ${username}`,
        content: 'Paragraph text...',
        banner: ''
      };
      saveToLocalStorage();
      updateDropdown();
      select.value = id;
      loadDocument(id);
    }

    function deleteDocument() {
      const id = select.value;
      if (id !== '-' && confirm("Are you sure you want to delete this document?")) {
        delete documents[id];
        saveToLocalStorage();
        updateDropdown();
        select.value = '-';
        doc.style.display = 'none';
      }
    }

  function loadDocument(id) {
  const d = documents[id];
  if (!d) return;

  titleField.value = d.title;
  detailsField.value = d.details;
  contentField.value = d.content;

  const defaultURL = "https://raw.githubusercontent.com/Jamesy-tech/jamesy-creator/main/Jamesy%20Creator/nav_banner.png";

  if (d.banner) {
    banner.style.backgroundImage = `url(${d.banner})`;
    bannerImg.src = d.banner;
  } else {
    banner.style.backgroundImage = `url("${defaultURL}")`;
    bannerImg.src = defaultURL;
  }

  if ((d.banner || '') === '' || d.banner === defaultURL) {
    banner.style.transform = "scaleX(-1)";
  } else {
    banner.style.transform = "none";
  }

  doc.style.display = 'flex';
}


    function updateCurrentDocument() {
      const id = select.value;
      if (id !== '-' && documents[id]) {
        documents[id] = {
          title: titleField.value,
          details: detailsField.value,
          content: contentField.value,
          banner: documents[id].banner || ''
        };
        saveToLocalStorage();
        updateDropdown();
      }
    }

    titleField.addEventListener('input', updateCurrentDocument);
    detailsField.addEventListener('input', updateCurrentDocument);
    contentField.addEventListener('input', updateCurrentDocument);

    select.addEventListener('change', () => {
      const id = select.value;
      if (id === '-') {
        doc.style.display = 'none';
      } else {
        loadDocument(id);
      }
    });

    bannerInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (event) {
        const id = select.value;
        if (id !== '-' && documents[id]) {
          const imageURL = event.target.result;
          documents[id].banner = imageURL;
          banner.style.backgroundImage = `url(${imageURL})`;
          bannerImg.src = imageURL;
          saveToLocalStorage();
        }
      };
      reader.readAsDataURL(file);
    });


function printDocument() {
  const title = titleField.value;
  const details = detailsField.value;
  const content = contentField.value.replace(/\n/g, "<br>");
  const bannerURL = bannerImg.src;
  
  const printWin = window.open('', '_blank');
  const html = `
    <!DOCTYPE html>
    <html>
    <head>
     <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cal+Sans&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900&family=Mulish:ital,wght@0,200..1000;1,200..1000&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
      <title>${title}</title>
      <style>
        body {
          font-family: "Mulish", sans-serif;
          margin: 20px;
        }
        .banner {
          margin: 0;
        border-radius: 15px;
        overflow: hidden;
        background: none !important;
        transform: none !important;
        min-height:0px;
        max-height:240px;
        margin-bottom: 20px;
        position: relative;
        width: 100%;
        }
        .banner img {
         display: block !important;
        width: 100%;
        height: auto;
        border-radius: 15px;
        margin: 0;
        max-height: 240px;
        object-fit: cover;
        }
        .title {
          font-size: 30px;
          margin-bottom: 10px;
        }
        .details {
          font-size: 16px;
          color: gray;
          margin-bottom: 20px;
        }
        .content {
          font-size: 18px;
          white-space: pre-wrap;
        }
      </style>
    </head>
    <body>
      <div class="banner">
  ${bannerURL ? `<img src="${bannerURL}" style="${bannerURL.includes('nav_banner.png') ? 'transform: scaleX(-1);' : ''}">` : ''}
</div>
      <div class="title">${title}</div>
      <div class="details">${details}</div>
      <div class="content">${content}</div>
    </body>
    </html>
  `;

  printWin.document.write(html);
  printWin.document.close();

  printWin.onload = () => {
    printWin.focus();
    printWin.print();
    printWin.close();
  };
}



    loadFromLocalStorage();
  </script>
</body>
</html>
